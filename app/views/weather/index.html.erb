<div class="page-container">

  <div class="page-header">
    <%= link_to root_path, class: "back-btn" do %>
      â† Back
    <% end %>
    <h1 class="page-title">ğŸŒ¤ï¸ Weather</h1>
  </div>

  <% if @weather && @weather["main"] %>
    <div class="weather-card">
      <div class="weather-location">
        <span class="location-icon">ğŸ“</span>
        <%= @weather["name"] %>
      </div>

      <div class="weather-main">
        <span class="weather-temp"><%= @weather["main"]["temp"].round %>Â°C</span>
        <span class="weather-desc"><%= @weather["weather"][0]["description"].capitalize %></span>
      </div>

      <div class="weather-grid">
        <div class="weather-item">
          <span class="weather-label">Feels like</span>
          <span class="weather-value"><%= @weather["main"]["feels_like"].round %>Â°C</span>
        </div>
        <div class="weather-item">
          <span class="weather-label">Humidity</span>
          <span class="weather-value"><%= @weather["main"]["humidity"] %>%</span>
        </div>
        <div class="weather-item">
          <span class="weather-label">Cloud cover</span>
          <span class="weather-value"><%= @weather["clouds"]["all"] %>%</span>
        </div>
        <div class="weather-item">
          <span class="weather-label">Wind</span>
          <span class="weather-value"><%= @weather["wind"]["speed"] %> m/s</span>
        </div>
        <div class="weather-item">
          <span class="weather-label">Visibility</span>
          <span class="weather-value"><%= (@weather["visibility"] / 1000.0).round(1) %> km</span>
        </div>
        <div class="weather-item">
          <span class="weather-label">Pressure</span>
          <span class="weather-value"><%= @weather["main"]["pressure"] %> hPa</span>
        </div>
      </div>

      <% cloud_cover = @weather["clouds"]["all"] %>
      <div class="aurora-advice">
        <% if cloud_cover < 30 %>
          <span class="advice-good">âœ… Great conditions to spot an aurora!</span>
        <% elsif cloud_cover < 60 %>
          <span class="advice-medium">âš ï¸ Partly cloudy â€” aurora might be visible</span>
        <% else %>
          <span class="advice-bad">âŒ Too cloudy â€” aurora unlikely to be visible</span>
        <% end %>
      </div>
    </div>
  <% else %>
    <div class="error-card">
      <p>Unable to load weather data. Please try again.</p>
    </div>
  <% end %>

</div>
